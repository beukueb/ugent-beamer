% Copyright 2009--2011 by Nico Schl√∂mer
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.

% UA page geometry
% \geometry{paperheight=7.5in,paperwidth=10.0in}
% ... Hang on! As suggested in the manual, don't mess around with beamer's
% assumed page dimensions (128mm x 96mm). Fonts, for example, do no get 
% automatically scaled and will look tiny if the above is executed.
% Instead, define a multiplier 12.8/(10.0*2.54) = 64/127 and adjust all
% respective lengths.


% ----------------------------------------------------------------------------
% *** required packages <<<
% ----------------------------------------------------------------------------
\RequirePackage{calc}
\RequirePackage{ifthen}
% ----------------------------------------------------------------------------
% *** END required packages >>>
% ----------------------------------------------------------------------------

\mode<presentation>

% ----------------------------------------------------------------------------
% *** DEFINE LENGTHS <<<
% ----------------------------------------------------------------------------
\newlength\margin
\setlength\margin{0.43cm}% 0.85cm * 64/127

\newlength\bannerwidth
\setlength\bannerwidth{11.94cm}% (10in - 2*0.85cm) * 64/127
\newlength\bannerheight
\setlength\bannerheight{1in}
\ifbeamer@dark\else%
  \newlength\bannerpadding
  \setlength\bannerpadding{0cm}
\fi
% ----------------------------------------------------------------------------
% *** END DEFINE LENGTHS >>>
% ----------------------------------------------------------------------------


% ----------------------------------------------------------------------------
% *** DEFINE IMAGES <<<
% ----------------------------------------------------------------------------
\pgfdeclareimage[width=2cm]{logo}{logo}
\pgfdeclareimage[width=\bannerwidth]{banner}{ugent-banner}

% TODO just use 
\ifthenelse{ \boolean{beamer@dark} \OR \boolean{beamer@darktitle} }
% then
{
  \pgfdeclareimage[width=\paperwidth]{graffiti}{graffiti}
}
%else
{}

\ifbeamer@dark%
  \pgfdeclareimage[width=\paperwidth]{graffiti}{graffiti}
\fi

% ----------------------------------------------------------------------------
% *** END DEFINE IMAGES <<<
% ----------------------------------------------------------------------------



% ----------------------------------------------------------------------------
% *** HEADLINE <<<
% ----------------------------------------------------------------------------
\ifthenelse{ \boolean{beamer@dark} \OR \(\boolean{beamer@darktitle}\AND\c@framenumber=1\) }{%
  \defbeamertemplate*{headline}{ugent theme}%
  {
    % page number
    \ifbeamer@framenumber%
      \ifnum\c@framenumber=1\else
       \pgftext[right,top,at=\pgfpoint{\paperwidth-\margin}{-0.04\paperheight}]{%
          \usebeamerfont{frame number in head}%
          \usebeamercolor[fg]{frame number in head}%
          \insertframenumber{}%
          \ifbeamer@totalframenumber%
            /\inserttotalframenumber%
          \fi
        }%
      \fi
    \fi%
  }%
}{
  \newlength\logotopmargin%
  \setlength\logotopmargin{0.43cm}%  0.85cm * 64/127
  \defbeamertemplate*{headline}{ugent theme}%
  {%
    \vskip\logotopmargin%
    \hskip\margin%
    \ifthenelse{ \boolean{beamer@dark} \OR \(\boolean{beamer@darktitle}\AND\c@framenumber=1\) }
    {%
      \vskip5cm% TODO: get rid of this quirk
    }
    {%
      \pgfuseimage{banner}%
    }
  }
}
% ----------------------------------------------------------------------------
% *** END HEADLINE <<<
% ----------------------------------------------------------------------------



% ----------------------------------------------------------------------------
% *** FRAMETITLE <<<
% ----------------------------------------------------------------------------
\newlength\frametitletopmargin
\setlength\frametitletopmargin{0.25cm}

\ifbeamer@dark\else%
  \newlength\frametitlewidth
  \setlength\frametitlewidth{\textwidth-\bannerwidth-\bannerpadding}
\fi

\defbeamertemplate*{frametitle}{ugent theme}
{%
  \ifbeamer@dark%
    % - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    \vskip\frametitletopmargin%
    \raggedleft\insertframetitle\par%
    % - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  \else%
    \begin{beamercolorbox}[right]{frame title}%
      \insertframetitle\par%
    \end{beamercolorbox}%
  \fi%
}
% ----------------------------------------------------------------------------
% *** END FRAMETITLE >>>
% ----------------------------------------------------------------------------



% ----------------------------------------------------------------------------
% *** FOOTLINE <<<
% ----------------------------------------------------------------------------


% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\defbeamertemplate*{footline}{ugent theme dark}
{%
  \ifthenelse{ \boolean{beamer@dark} \OR \(\boolean{beamer@darktitle}\AND\c@framenumber=1\) }
  {%
    \pgftext[left,bottom]{}%
    \pgftext[right,bottom]{\pgfuseimage{banner}}%
  }
  {%
     % page number
    \ifbeamer@framenumber%
      \ifnum\c@framenumber=1\else
        \pgftext[bottom,at=\pgfpoint{0.96\paperwidth}{0.02\paperwidth}]{%
          \usebeamerfont{frame number in foot}%
          \usebeamercolor[fg]{frame number in foot}\insertframenumber{}%
          \ifbeamer@totalframenumber%
            /\inserttotalframenumber%
          \fi
        }%
      \fi
    \fi%
    }
}%
% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

% ----------------------------------------------------------------------------
% *** END of FOOTLINE >>>
% ---------------------------------------------------------------------------- 


% ----------------------------------------------------------------------------
% *** MARGINS <<<
% ----------------------------------------------------------------------------
% set left and right text margins
\setbeamersize{text margin left=2\margin,%
               text margin right=2\margin}
% ----------------------------------------------------------------------------
% *** END MARGINS >>>
% ----------------------------------------------------------------------------



% ----------------------------------------------------------------------------
% *** BACKGROUND <<<
% ----------------------------------------------------------------------------
\defbeamertemplate*{background canvas}{ugent theme}
{%
  \ifthenelse{ \boolean{beamer@dark} \OR \(\boolean{beamer@darktitle}\AND\c@framenumber=1\) }
  % *** THEN ***
  {%
    \pgfuseimage{graffiti}
    \ifnum\c@framenumber=1%
      \setbeamercolor{normal text}{bg=ugentblue}
    \else%
      \setbeamercolor{normal text}{bg=ugentblue50}
    \fi%
  }
  % *** ELSE ***
  {}
}
% ----------------------------------------------------------------------------
% *** END BACKGROUND <<<
% ----------------------------------------------------------------------------

\mode
<all>
